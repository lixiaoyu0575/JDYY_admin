<ba-card>
<div class="widget" >
  <div class="row">
    <div class="col-md-8" *ngIf="nowuser"><h2>{{nowuser}}的患者报告列表</h2></div>
  </div>
  <br>
  <div class="row" *ngIf="heroes&&nowuser">
      <div class="panel panel-default">
        <table class="table table-hover" [mfData]="heroes | idFilter : idFilterQuery |
         nameFilter : nameFilterQuery | ageFilter : ageFilterQuery | scantypeFilter : scantypeFilterQuery |
         timeFilter : timeFilterQuery | statusFilter : statusFilterQuery "
               #mf="mfDataTable" [mfRowsOnPage]="rowsOnPage" [(mfSortBy)]="sortBy" [(mfSortOrder)]="sortOrder">
          <thead>
          <tr>
            <th style="width: 10%"></th>
            <th style="width: 15%">
              <mfDefaultSorter by="_ID">ID</mfDefaultSorter>
            </th>
            <th style="width: 15%">
              <mfDefaultSorter by="name">姓名</mfDefaultSorter>
            </th>
            <th style="width: 15%">
              <mfDefaultSorter by="age">年龄</mfDefaultSorter>
            </th>
            <th style="width: 15%">
              <mfDefaultSorter by="scan">检查类型</mfDefaultSorter>
            </th>
            <th style="width: 10%">
              <mfDefaultSorter by="time">时间</mfDefaultSorter>
            </th>
            <th style="width: 20%">
              <mfDefaultSorter by="status">申请状态</mfDefaultSorter>
            </th>
          </tr>
          <tr>
            <th colspan="1">
            </th>
            <th colspan="1">
              <input class="form-control" [(ngModel)]="idFilterQuery" />
            </th>
            <th colspan="1">
              <input class="form-control" [(ngModel)]="nameFilterQuery" />
            </th>
            <th colspan="1">
              <input class="form-control" [(ngModel)]="ageFilterQuery" />
            </th>
            <th colspan="1">
              <input class="form-control" [(ngModel)]="scantypeFilterQuery" />
            </th>
            <th colspan="1">
              <input class="form-control" [(ngModel)]="timeFilterQuery" />
            </th>
            <th colspan="1">
              <input class="form-control" [(ngModel)]="statusFilterQuery" />
            </th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let item of mf.data" (click)="onSelect(item)">
            <ng-container *ngIf='item.user.indexOf(nowuser) > -1'>
            <td>
              <button (click)="DeleteApply(item)" class="btn btn-danger">x</button>
            </td>
            <td>{{item._id}}</td>
            <td>{{item.name}}</td>
            <td>{{item.age}}</td>
            <td>{{item.scantype}}</td>
            <td>{{item.time}}</td>
            <td [ngStyle]="{'color':item.status==='未审核'?'#ff5151':'#7afec6'}">{{item.status}}</td>
            </ng-container>
          </tr>
          </tbody>
          <tfoot>
          <tr>
            <td colspan="7">
              <mfBootstrapPaginator [rowsOnPageSet]="[5,10,15]"></mfBootstrapPaginator>
            </td>
          </tr>
          </tfoot>
        </table>
      </div>
  </div>
  <br>
<div *ngIf="selectedHero" >
  <hr>
  <div class="row">
    <div class="col-md-9"></div>
    <div class="col-md-1">
      <button type="button" class="btn btn-default btn-raised" (click)="gotoDetail()">查看申请</button>
    </div>
    <div class="col-md-1">
      <button type="button" class="btn btn-default btn-raised" (click)="doShare();sendMail()">分享报告</button>
    </div>
    <div class="col-md-1">
      <div  class="form-group">
        <select  class="form-control" [(ngModel)]="shareTo"
                 id="exampleSelect3">
          <option *ngFor="let user of users" [value]="user.name">{{user.name}}</option>
        </select>
      </div>
    </div>
  </div>
</div>
</div>
</ba-card>
